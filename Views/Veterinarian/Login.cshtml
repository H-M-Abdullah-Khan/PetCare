@{
    ViewData["Title"] = "Veterinarian Login";
    Layout = null;
}

<!DOCTYPE html>
<html lang="en" data-layout="">

<head>
    <meta charset="utf-8" />
    <title>Log In | PetCare Veterinarian Portal</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta content="Veterinarian login page for PetCare system" name="description" />
    <meta content="PetCare" name="author" />

    <link rel="shortcut icon" href="~/dashboard/assets/images/favicon.ico" />
    <link href="~/dashboard/assets/css/vendor.min.css" rel="stylesheet" />
    <link href="~/dashboard/assets/css/app.min.css" rel="stylesheet" id="app-style" />
    <link href="~/dashboard/assets/css/icons.min.css" rel="stylesheet" />
    <!-- SweetAlert2 -->
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
</head>

<body>

    <div class="auth-bg d-flex min-vh-100">
        <div class="row g-0 justify-content-center w-100 m-xxl-5 px-xxl-4 m-3">
            <div class="col-xxl-3 col-lg-5 col-md-6">

                <a href="/" class="auth-brand d-flex justify-content-center mb-2">
                    <img src="~/dashboard/assets/images/logo-dark.png" alt="logo" height="26" />
                </a>

                @if (TempData["Error"] != null)
                {
                    <div class="alert alert-danger text-center">@TempData["Error"]</div>
                }

                @if (TempData["SweetAlert"] != null)
                {
                    var status = TempData["SweetAlert"]?.ToString()?.ToLower();

                    if (status == "pending")
                    {
                        <script>
                            Swal.fire({
                                icon: 'info',
                                title: 'Pending Approval',
                                text: 'Your account is not approved yet. Please wait for admin approval.',
                                confirmButtonColor: '#3085d6'
                            });
                        </script>
                    }
                    else if (status == "rejected")
                    {
                        <script>
                            Swal.fire({
                                icon: 'error',
                                title: 'Access Denied',
                                text: 'Your registration request was rejected. Contact support for more info.',
                                confirmButtonColor: '#d33'
                            });
                        </script>
                    }
                }

                <div class="card overflow-hidden text-center p-xxl-4 p-3 mb-0">
                    <h4 class="fw-semibold mb-3 fs-18">Log in to your account</h4>

                    <!-- START: Updated form from Admin page -->
                    <form method="post" class="text-start mb-3">
                        @Html.AntiForgeryToken()

                        <div class="mb-3">
                            <label for="inputEmailAddress" class="form-label">Email</label>
                            <input type="email" class="form-control" id="inputEmailAddress" name="email" placeholder="jhon@example.com" required />
                        </div>

                        <div class="mb-3">
                            <label for="inputChoosePassword" class="form-label">Password</label>
                            <div class="input-group" id="show_hide_password">
                                <input type="password" name="password" class="form-control border-end-0" id="inputChoosePassword" placeholder="Enter Password" required />
                                <a href="javascript:;" class="btn btn-outline-secondary" type="button"><i class="bi bi-eye-slash-fill"></i></a>
                            </div>
                        </div>

                        <div class="col-12">
                            <div class="d-grid">
                                <button type="submit" class="btn btn-primary fw-semibold">Login</button>
                            </div>
                        </div>
                    </form>
                    <!-- END: Updated form -->

                    <p class="text-muted fs-14 mb-0">
                        Don't have an account?
                        <a href="@Url.Action("Register", "Veterinarian")" class="fw-semibold text-danger ms-1">Sign Up!</a>
                    </p>
                </div>

                <p class="mt-4 text-center mb-0">
                    &copy; @DateTime.Now.Year PetCare - All rights reserved.
                </p>
            </div>
        </div>
    </div>

    <script src="~/dashboard/assets/js/vendor.min.js"></script>
    <script src="~/dashboard/assets/js/app.js"></script>

    <script>
        $(document).ready(function () {
            $("#show_hide_password a").on('click', function (event) {
                event.preventDefault();
                var input = $('#show_hide_password input');
                var icon = $('#show_hide_password i');
                if (input.attr("type") === "text") {
                    input.attr('type', 'password');
                    icon.addClass("bi-eye-slash-fill").removeClass("bi-eye-fill");
                } else {
                    input.attr('type', 'text');
                    icon.removeClass("bi-eye-slash-fill").addClass("bi-eye-fill");
                }
            });
        });
    </script>
    @if (TempData["SweetAlert"] != null)
    {
        var status = TempData["SweetAlert"]?.ToString()?.ToLower();

        if (status == "pending")
        {
            <script>
                Swal.fire({
                    icon: 'info',
                    title: 'Pending Approval',
                    text: 'Your account is not approved yet. Please wait for admin approval.',
                    confirmButtonColor: '#3085d6'
                });
            </script>
        }
        else if (status == "rejected")
        {
            <script>
                Swal.fire({
                    icon: 'error',
                    title: 'Access Denied',
                    text: 'Your registration request was rejected. Contact support for more info.',
                    confirmButtonColor: '#d33'
                });
            </script>
        }
        else if (status == "invalid_credentials")
        {
            <script>
                Swal.fire({
                    icon: 'error',
                    title: 'Login Failed',
                    text: '@ViewBag.Error',
                    confirmButtonColor: '#d33'
                });
            </script>
        }
        else if (status == "missing_fields")
        {
            <script>
                Swal.fire({
                    icon: 'warning',
                    title: 'Missing Fields',
                    text: '@ViewBag.Error',
                    confirmButtonColor: '#f0ad4e'
                });
            </script>
        }
        else if (status == "login_error")
        {
            <script>
                Swal.fire({
                    icon: 'error',
                    title: 'Login Error',
                    text: '@ViewBag.Error',
                    confirmButtonColor: '#d33'
                });
            </script>
        }
    }


</body>
</html>
